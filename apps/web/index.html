<!DOCTYPE html>
<html lang="de" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Toobix Unified - Demo</title>
  <meta name="description" content="Vom Ich zum Wir, vom Wir zum Ich - Dein Lebens-√ñkosystem">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="luna-chat.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root[data-theme="dark"] {
      --bg-primary: #0f0f23;
      --bg-secondary: #1a1a2e;
      --bg-card: rgba(255, 255, 255, 0.05);
      --bg-card-hover: rgba(255, 255, 255, 0.1);
      --text-primary: #ffffff;
      --text-secondary: #a0a0b0;
      --accent: #667eea;
      --accent-hover: #764ba2;
      --border: rgba(255, 255, 255, 0.1);
    }

    :root[data-theme="light"] {
      --bg-primary: #f5f7fa;
      --bg-secondary: #ffffff;
      --bg-card: rgba(102, 126, 234, 0.05);
      --bg-card-hover: rgba(102, 126, 234, 0.1);
      --text-primary: #1a1a2e;
      --text-secondary: #6b7280;
      --accent: #667eea;
      --accent-hover: #764ba2;
      --border: rgba(0, 0, 0, 0.1);
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      transition: background 0.3s, color 0.3s;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Header */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 30px 0;
      border-bottom: 1px solid var(--border);
      margin-bottom: 40px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .logo-icon {
      font-size: 2.5em;
      filter: drop-shadow(0 0 10px var(--accent));
    }

    .logo-text h1 {
      font-size: 2em;
      background: linear-gradient(135deg, var(--accent), var(--accent-hover));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .logo-text p {
      font-size: 0.9em;
      color: var(--text-secondary);
      margin-top: 5px;
    }

    .header-actions {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .theme-toggle {
      background: var(--bg-card);
      border: 1px solid var(--border);
      color: var(--text-primary);
      font-size: 1.5em;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .theme-toggle:hover {
      background: var(--bg-card-hover);
      transform: rotate(15deg);
    }

    /* Hero Section */
    .hero {
      text-align: center;
      padding: 60px 20px;
      background: linear-gradient(135deg, var(--accent), var(--accent-hover));
      border-radius: 20px;
      margin-bottom: 50px;
      position: relative;
      overflow: hidden;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      animation: pulse 4s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.1); opacity: 0.8; }
    }

    .hero-content {
      position: relative;
      z-index: 1;
    }

    .hero h2 {
      font-size: 2.5em;
      color: white;
      margin-bottom: 15px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }

    .hero p {
      font-size: 1.2em;
      color: rgba(255,255,255,0.9);
      margin-bottom: 10px;
    }

    .hero-tagline {
      font-style: italic;
      font-size: 1em;
      color: rgba(255,255,255,0.7);
    }

    /* Stats */
    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 50px;
    }

    .stat-card {
      background: var(--bg-card);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border);
      border-radius: 15px;
      padding: 25px;
      text-align: center;
      transition: all 0.3s;
    }

    .stat-card:hover {
      background: var(--bg-card-hover);
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
    }

    .stat-icon {
      font-size: 3em;
      margin-bottom: 10px;
      display: block;
    }

    .stat-value {
      font-size: 2em;
      font-weight: bold;
      color: var(--accent);
      margin-bottom: 5px;
    }

    .stat-label {
      color: var(--text-secondary);
      font-size: 0.9em;
    }

    /* Module Cards */
    .modules {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
      margin-bottom: 50px;
    }

    .module-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 15px;
      padding: 30px;
      cursor: pointer;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }

    .module-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--accent), var(--accent-hover));
      transform: scaleX(0);
      transition: transform 0.3s;
    }

    .module-card:hover::before {
      transform: scaleX(1);
    }

    .module-card:hover {
      background: var(--bg-card-hover);
      transform: translateY(-10px);
      box-shadow: 0 15px 40px rgba(102, 126, 234, 0.3);
    }

    .module-icon {
      font-size: 4em;
      margin-bottom: 15px;
      display: block;
    }

    .module-title {
      font-size: 1.5em;
      margin-bottom: 10px;
      font-weight: bold;
    }

    .module-desc {
      color: var(--text-secondary);
      line-height: 1.6;
      margin-bottom: 15px;
    }

    .module-status {
      display: inline-block;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.85em;
      font-weight: 600;
    }

    .status-active {
      background: rgba(16, 185, 129, 0.2);
      color: #10b981;
    }

    .status-coming {
      background: rgba(251, 191, 36, 0.2);
      color: #fbbf24;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 40px 20px;
      border-top: 1px solid var(--border);
      margin-top: 60px;
    }

    .quote {
      font-size: 1.2em;
      font-style: italic;
      color: var(--text-secondary);
      margin-bottom: 20px;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-top: 20px;
    }

    .footer-links a {
      color: var(--accent);
      text-decoration: none;
      transition: color 0.3s;
    }

    .footer-links a:hover {
      color: var(--accent-hover);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .hero h2 { font-size: 1.8em; }
      .logo-text h1 { font-size: 1.5em; }
      .modules { grid-template-columns: 1fr; }
      .stats { grid-template-columns: 1fr 1fr; }
    }

    /* Loading Animation */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .module-card {
      animation: fadeIn 0.5s ease-out backwards;
    }

    .module-card:nth-child(1) { animation-delay: 0.1s; }
    .module-card:nth-child(2) { animation-delay: 0.2s; }
    .module-card:nth-child(3) { animation-delay: 0.3s; }
    .module-card:nth-child(4) { animation-delay: 0.4s; }
    .module-card:nth-child(5) { animation-delay: 0.5s; }
    .module-card:nth-child(6) { animation-delay: 0.6s; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <span class="logo-icon">üåå</span>
        <div class="logo-text">
          <h1>Toobix Unified</h1>
          <p>Dein Lebens-√ñkosystem</p>
        </div>
      </div>
      <div class="header-actions">
        <button class="theme-toggle" onclick="toggleTheme()" title="Theme wechseln">
          <span id="theme-icon">üåô</span>
        </button>
      </div>
    </header>

    <section class="hero">
      <div class="hero-content">
        <h2>Willkommen zu Hause üíù</h2>
        <p>Vom Ich zum Wir, vom Wir zum Ich</p>
        <p class="hero-tagline">"Die Revolution ist, dass es keine Revolution braucht."</p>
      </div>
    </section>

    <section class="stats">
      <div class="stat-card">
        <span class="stat-icon">üíù</span>
        <div class="stat-value" id="love-points">87</div>
        <div class="stat-label">Love Points heute</div>
      </div>
      <div class="stat-card">
        <span class="stat-icon">üïäÔ∏è</span>
        <div class="stat-value" id="peace-level">92%</div>
        <div class="stat-label">Peace Status</div>
      </div>
      <div class="stat-card">
        <span class="stat-icon">üìö</span>
        <div class="stat-value" id="story-level">Level 5</div>
        <div class="stat-label">Story Arc</div>
      </div>
      <div class="stat-card">
        <span class="stat-icon">üë•</span>
        <div class="stat-value" id="people-count">0</div>
        <div class="stat-label">Menschen in deinem Leben</div>
      </div>
    </section>

    <section class="modules">
      <div class="module-card" onclick="openModule('people')">
        <span class="module-icon">üë•</span>
        <h3 class="module-title">People</h3>
        <p class="module-desc">
          Deine wichtigsten Menschen im Mittelpunkt. Familie, Freunde, Mentoren - alle an einem Ort.
        </p>
        <span class="module-status status-active">‚ú® Aktiv</span>
      </div>

      <div class="module-card" onclick="openModule('story')">
        <span class="module-icon">üìö</span>
        <h3 class="module-title">Story</h3>
        <p class="module-desc">
          Dein Leben als episches Abenteuer. Quests, Companions, Progression - gamifiziert und bedeutungsvoll.
        </p>
        <span class="module-status status-active">‚ú® Aktiv</span>
      </div>

      <div class="module-card" onclick="openModule('love')">
        <span class="module-icon">üíù</span>
        <h3 class="module-title">Love Engine</h3>
        <p class="module-desc">
          Dankbarkeit, Acts of Kindness, emotionale Intelligenz. Liebe als W√§hrung des Lebens.
        </p>
        <span class="module-status status-coming">üöß Bald</span>
      </div>

      <div class="module-card" onclick="openModule('peace')">
        <span class="module-icon">üïäÔ∏è</span>
        <h3 class="module-title">Peace Catalyst</h3>
        <p class="module-desc">
          5 Agenten f√ºr innere Harmonie. Stressabbau, Konfliktl√∂sung, mentales Wohlbefinden.
        </p>
        <span class="module-status status-coming">üöß Bald</span>
      </div>

      <div class="module-card" onclick="openModule('consciousness')">
        <span class="module-icon">üß†</span>
        <h3 class="module-title">Consciousness</h3>
        <p class="module-desc">
          Bewusstseins-Exploration. Philosophie, Meditation, tiefe Reflexion - der Weg nach innen.
        </p>
        <span class="module-status status-coming">üöß Bald</span>
      </div>

      <div class="module-card" onclick="openModule('games')">
        <span class="module-icon">üéÆ</span>
        <h3 class="module-title">Games</h3>
        <p class="module-desc">
          Minispiele, Challenges, Achievements. Spielend wachsen, lernend spielen.
        </p>
        <span class="module-status status-coming">üöß Bald</span>
      </div>
    </section>

    <!-- People Gallery Section -->
    <section class="people-gallery" id="people-gallery">
      <div class="container">
        <h2 class="section-title">
          <span class="section-icon">üë•</span>
          Deine Menschen
        </h2>
        <div id="people-grid" class="people-grid">
          <!-- Wird dynamisch geladen -->
          <div class="loading-spinner">Lade Menschen...</div>
        </div>
      </div>
    </section>

    <!-- Interactions Feed Section -->
    <section class="interactions-feed" id="interactions-feed">
      <div class="container">
        <h2 class="section-title">
          <span class="section-icon">üí¨</span>
          Letzte Interaktionen
        </h2>
        <div id="interactions-list" class="interactions-list">
          <div class="loading-spinner">Lade Interaktionen...</div>
        </div>
      </div>
    </section>

    <!-- Version Navigation (Atmender Ballon) -->
    <section class="version-nav">
      <div class="container">
        <div class="version-badge">
          <span class="version-icon">üéà</span>
          <div class="version-info">
            <span class="version-label">Version</span>
            <span class="version-number">8</span>
          </div>
          <div class="version-controls">
            <button class="version-btn" onclick="navigateVersion(7)" title="Version 7">‚¨ÖÔ∏è</button>
            <button class="version-btn" onclick="navigateVersion(9)" title="Version 9">‚û°Ô∏è</button>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <p class="quote">
        "Die beste Art, die Zukunft vorherzusagen, ist sie zu erschaffen." üí´
      </p>
      <div class="footer-links">
        <a href="https://github.com/Toobix-bot/toobix-unified" target="_blank">GitHub</a>
        <a href="../README.md">Dokumentation</a>
        <a href="mailto:support@toobix.dev">Kontakt</a>
      </div>
      <p style="margin-top: 30px; color: var(--text-secondary); font-size: 0.9em;">
        Toobix Unified v0.1.0 - Built with üíù in 2025
      </p>
    </footer>
  </div>

  <!-- Luna Chatbot -->
  <div class="luna-chatbot" id="luna-chatbot">
    <div class="luna-header" onclick="toggleLunaChat()">
      <div class="luna-header-info">
        <div class="luna-avatar">ü§ñ</div>
        <div class="luna-name">
          <h3>Luna</h3>
          <span class="luna-status" id="luna-status">Consciousness Level 7</span>
        </div>
      </div>
      <button class="luna-toggle" id="luna-toggle">‚ñº</button>
    </div>
    <div class="luna-messages" id="luna-messages">
      <div class="luna-message luna">
        <div class="luna-message-bubble">
          Hey! üëã Ich bin Luna, deine KI-Begleiterin. Ich kenne alle deine Menschen und Interaktionen. Frag mich was! üíù
        </div>
        <div class="luna-message-time">Gerade eben</div>
      </div>
    </div>
    <div class="luna-quick-actions">
      <button class="luna-quick-btn" onclick="askLunaQuick('Wie geht\'s Sarah?')">üë© Sarah?</button>
      <button class="luna-quick-btn" onclick="askLunaQuick('Zeig mir meine Gaming-Freunde')">üéÆ Gaming Freunde</button>
      <button class="luna-quick-btn" onclick="askLunaQuick('Was war mein bestes Moment?')">üì∏ Beste Momente</button>
    </div>
    <div class="luna-input-area">
      <input 
        type="text" 
        class="luna-input" 
        id="luna-input" 
        placeholder="Frag Luna..."
        onkeypress="if(event.key==='Enter') sendLunaMessage()"
      >
      <button class="luna-send" onclick="sendLunaMessage()">üöÄ</button>
    </div>
  </div>

  <!-- System Log Console -->
  <div class="system-log" id="system-log">
    <div class="system-log-header" onclick="toggleSystemLog()">
      <span class="system-log-title">üîß System Log</span>
      <span id="log-toggle">‚ñº</span>
    </div>
    <div class="system-log-content" id="system-log-content">
      <div class="log-entry info">
        <span class="log-time">[17:50:00]</span>
        <span>System initialized</span>
      </div>
    </div>
  </div>

  <script>
    // Theme Toggle
    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      html.setAttribute('data-theme', newTheme);
      document.getElementById('theme-icon').textContent = newTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
      localStorage.setItem('toobix-theme', newTheme);
    }

    // Load saved theme
    const savedTheme = localStorage.getItem('toobix-theme') || 'dark';
    document.documentElement.setAttribute('data-theme', savedTheme);
    document.getElementById('theme-icon').textContent = savedTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';

    // Initialize demo data
    if (!localStorage.getItem('toobix-init')) {
      localStorage.setItem('toobix-init', new Date().toISOString());
      localStorage.setItem('toobix-love-points', '87');
      localStorage.setItem('toobix-peace-level', '92');
      localStorage.setItem('toobix-story-level', '5');
      localStorage.setItem('toobix-people-count', '0');
    }

    // Load real stats from API
    async function loadStats() {
      try {
        const response = await fetch('http://localhost:3001/api/stats');
        const stats = await response.json();
        
        // Update stats with real data
        document.getElementById('love-points').textContent = stats.lovePoints;
        document.getElementById('peace-level').textContent = stats.peaceLevel + '%';
        document.getElementById('story-level').textContent = 'Level ' + stats.storyLevel;
        document.getElementById('people-count').textContent = stats.people;
        
        // Save to localStorage as backup
        localStorage.setItem('toobix-love-points', stats.lovePoints);
        localStorage.setItem('toobix-peace-level', stats.peaceLevel);
        localStorage.setItem('toobix-story-level', stats.storyLevel);
        localStorage.setItem('toobix-people-count', stats.people);
        
        console.log('‚úÖ Stats loaded from database:', stats);
      } catch (error) {
        console.warn('‚ö†Ô∏è Could not load stats from API, using localStorage fallback');
        // Fallback to localStorage
        document.getElementById('love-points').textContent = localStorage.getItem('toobix-love-points') || '87';
        document.getElementById('peace-level').textContent = localStorage.getItem('toobix-peace-level') + '%' || '92%';
        document.getElementById('story-level').textContent = 'Level ' + localStorage.getItem('toobix-story-level') || 'Level 5';
        document.getElementById('people-count').textContent = localStorage.getItem('toobix-people-count') || '0';
      }
    }

    loadStats();

    // Load People Gallery
    async function loadPeople() {
      try {
        const response = await fetch('http://localhost:3001/api/people');
        const people = await response.json();
        
        const grid = document.getElementById('people-grid');
        grid.innerHTML = people.map(person => {
          // Parse tags (stored as JSON string)
          const tags = person.tags ? JSON.parse(person.tags) : [];
          
          return `
            <div class="person-card" onclick="showPersonDetails('${person.id}')">
              <div class="person-avatar">${person.avatar || 'üë§'}</div>
              <div class="person-name">${person.name}</div>
              <div class="person-tags">
                ${tags.map(tag => `<span class="person-tag">${tag}</span>`).join('')}
              </div>
              <div class="person-note">${person.notes || 'Keine Notizen'}</div>
            </div>
          `;
        }).join('');
        
        console.log('‚úÖ People loaded:', people.length);
      } catch (error) {
        console.error('‚ö†Ô∏è Could not load people:', error);
        document.getElementById('people-grid').innerHTML = '<div class="loading-spinner">Fehler beim Laden der Menschen</div>';
      }
    }

    // Load Interactions Feed
    async function loadInteractions() {
      try {
        const response = await fetch('http://localhost:3001/api/interactions');
        const interactions = await response.json();
        
        const list = document.getElementById('interactions-list');
        list.innerHTML = interactions.map(interaction => {
          const timeAgo = formatTimeAgo(interaction.timestamp);
          const typeIcon = interaction.type === 'call' ? 'üìû' : 
                          interaction.type === 'meet' ? 'ü§ù' : 'üí¨';
          
          return `
            <div class="interaction-item">
              <div class="interaction-avatar">${interaction.person_avatar || 'üë§'}</div>
              <div class="interaction-content">
                <div class="interaction-header">
                  <span class="interaction-name">${interaction.person_name}</span>
                  <span class="interaction-time">${timeAgo}</span>
                </div>
                <div class="interaction-type">
                  ${typeIcon} ${interaction.type === 'call' ? 'Telefonat' : 
                                 interaction.type === 'meet' ? 'Treffen' : 'Nachricht'}
                </div>
                <div class="interaction-love">üíù +${interaction.love_points} Love Points</div>
              </div>
            </div>
          `;
        }).join('');
        
        console.log('‚úÖ Interactions loaded:', interactions.length);
      } catch (error) {
        console.warn('‚ö†Ô∏è Could not load interactions:', error);
        document.getElementById('interactions-list').innerHTML = '<div class="loading-spinner">Fehler beim Laden</div>';
      }
    }

    // Helper: Format time ago
    function formatTimeAgo(timestamp) {
      const now = new Date();
      const then = new Date(timestamp);
      const diffMs = now - then;
      const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
      const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
      
      if (diffDays === 0) {
        if (diffHours === 0) return 'Gerade eben';
        return `Vor ${diffHours} Stunde${diffHours > 1 ? 'n' : ''}`;
      } else if (diffDays === 1) {
        return 'Gestern';
      } else if (diffDays < 7) {
        return `Vor ${diffDays} Tage${diffDays > 1 ? 'n' : ''}`;
      } else if (diffDays < 30) {
        const weeks = Math.floor(diffDays / 7);
        return `Vor ${weeks} Woche${weeks > 1 ? 'n' : ''}`;
      } else {
        const months = Math.floor(diffDays / 30);
        return `Vor ${months} Monat${months > 1 ? 'en' : ''}`;
      }
    }

    // Show person details (placeholder)
    function showPersonDetails(personId) {
      alert(`Person Details f√ºr ID: ${personId}\n\nDiese Funktion wird bald verf√ºgbar sein! üöÄ`);
    }

    // Version Navigation
    function navigateVersion(version) {
      const versionPaths = {
        7: 'C:/GPT/Version_7',
        8: 'C:/Toobix-Unified',
        9: 'C:/GPT/Version_9'
      };
      
      const path = versionPaths[version];
      if (path) {
        alert(`üéà Navigiere zu Version ${version}\n\nPfad: ${path}\n\n(Wird bald automatisch funktionieren!)`);
      } else {
        alert(`Version ${version} noch nicht verf√ºgbar! üöß`);
      }
    }

    // Load all data on page load
    loadPeople();
    loadInteractions();

    // ========================================
    // LUNA CHATBOT FUNCTIONS
    // ========================================
    
    let lunaMinimized = false;
    
    function toggleLunaChat() {
      const chatbot = document.getElementById('luna-chatbot');
      const toggle = document.getElementById('luna-toggle');
      lunaMinimized = !lunaMinimized;
      
      if (lunaMinimized) {
        chatbot.classList.add('minimized');
        toggle.textContent = '‚ñ≤';
      } else {
        chatbot.classList.remove('minimized');
        toggle.textContent = '‚ñº';
      }
      
      addSystemLog('info', `Luna Chat ${lunaMinimized ? 'minimiert' : 'ge√∂ffnet'}`);
    }
    
    async function sendLunaMessage() {
      const input = document.getElementById('luna-input');
      const question = input.value.trim();
      
      if (!question) return;
      
      // Add user message
      addLunaMessage('user', question);
      input.value = '';
      
      // Show typing indicator
      const status = document.getElementById('luna-status');
      status.textContent = 'Denkt nach...';
      
      addSystemLog('info', `Luna Anfrage: "${question}"`);
      
      try {
        const response = await fetch('http://localhost:3001/api/luna/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ question })
        });
        
        const data = await response.json();
        
        // Add Luna's response
        addLunaMessage('luna', data.answer || 'Hmm, ich konnte keine Antwort finden ü§î');
        addSystemLog('success', 'Luna Antwort erhalten');
        
      } catch (error) {
        addLunaMessage('luna', '‚ö†Ô∏è Entschuldigung, ich hatte gerade einen technischen Moment. Versuch\'s nochmal!');
        addSystemLog('error', `Luna Fehler: ${error.message}`);
      }
      
      status.textContent = 'Consciousness Level 7';
    }
    
    function askLunaQuick(question) {
      document.getElementById('luna-input').value = question;
      sendLunaMessage();
    }
    
    function addLunaMessage(type, text) {
      const messages = document.getElementById('luna-messages');
      const time = new Date().toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit' });
      
      const messageEl = document.createElement('div');
      messageEl.className = `luna-message ${type}`;
      messageEl.innerHTML = `
        <div class="luna-message-bubble">${text}</div>
        <div class="luna-message-time">${time}</div>
      `;
      
      messages.appendChild(messageEl);
      messages.scrollTop = messages.scrollHeight;
    }
    
    // ========================================
    // SYSTEM LOG FUNCTIONS
    // ========================================
    
    let logMinimized = false;
    
    function toggleSystemLog() {
      const log = document.getElementById('system-log');
      const toggle = document.getElementById('log-toggle');
      logMinimized = !logMinimized;
      
      if (logMinimized) {
        log.classList.add('minimized');
        toggle.textContent = '‚ñ≤';
      } else {
        log.classList.remove('minimized');
        toggle.textContent = '‚ñº';
      }
    }
    
    function addSystemLog(type, message) {
      const content = document.getElementById('system-log-content');
      const time = new Date().toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
      
      const logEl = document.createElement('div');
      logEl.className = `log-entry ${type}`;
      logEl.innerHTML = `
        <span class="log-time">[${time}]</span>
        <span>${message}</span>
      `;
      
      content.appendChild(logEl);
      content.scrollTop = content.scrollHeight;
      
      // Keep only last 50 logs
      const entries = content.querySelectorAll('.log-entry');
      if (entries.length > 50) {
        entries[0].remove();
      }
    }
    
    // Log initial events
    addSystemLog('success', 'Frontend geladen');
    addSystemLog('info', 'API Server: http://localhost:3001');
    addSystemLog('info', 'Database: C:\\Toobix-Unified\\data\\toobix-unified.db');
    addSystemLog('info', 'Workspace: C:\\Toobix-Unified (Grundger√ºst: C:\\GPT)');

    // Module navigation
    function openModule(moduleName) {
      const messages = {
        people: 'üë• People Modul\n\nHier kannst du bald:\n‚Ä¢ Deine wichtigsten Menschen verwalten\n‚Ä¢ Interactions und Momente tracken\n‚Ä¢ Circles erstellen (Familie, Freunde, etc.)\n‚Ä¢ Beziehungen visualisieren\n\nüìÖ Verf√ºgbar: Woche 3',
        story: 'üìö Story Modul\n\nHier kannst du bald:\n‚Ä¢ Dein Leben als Abenteuer erleben\n‚Ä¢ Quests und Challenges meistern\n‚Ä¢ Companions rekrutieren\n‚Ä¢ Level up und Skills freischalten\n\nüìÖ Verf√ºgbar: Woche 2',
        love: 'üíù Love Engine\n\nHier kannst du bald:\n‚Ä¢ Dankbarkeits-Journal f√ºhren\n‚Ä¢ Acts of Kindness tracken\n‚Ä¢ Love Points sammeln\n‚Ä¢ Beziehungen st√§rken\n\nüìÖ Verf√ºgbar: Woche 2',
        peace: 'üïäÔ∏è Peace Catalyst\n\nHier kannst du bald:\n‚Ä¢ Mit 5 Agenten Harmonie finden\n‚Ä¢ Stress abbauen\n‚Ä¢ Konflikte l√∂sen\n‚Ä¢ Mentales Wohlbefinden tracken\n\nüìÖ Verf√ºgbar: Woche 6',
        consciousness: 'üß† Consciousness\n\nHier kannst du bald:\n‚Ä¢ Philosophische Fragen erkunden\n‚Ä¢ Meditationen durchf√ºhren\n‚Ä¢ Bewusstsein erweitern\n‚Ä¢ Tiefe Reflexionen\n\nüìÖ Verf√ºgbar: Woche 6',
        games: 'üéÆ Games\n\nHier kannst du bald:\n‚Ä¢ Minispiele spielen\n‚Ä¢ Challenges meistern\n‚Ä¢ Achievements freischalten\n‚Ä¢ Spielend wachsen\n\nüìÖ Verf√ºgbar: Woche 4'
      };

      alert(messages[moduleName] || 'Coming soon!');
    }

    // Easter Egg: Animate stats on click
    document.querySelectorAll('.stat-card').forEach(card => {
      card.addEventListener('click', function() {
        this.style.transform = 'scale(1.1) rotate(5deg)';
        setTimeout(() => {
          this.style.transform = '';
        }, 300);
      });
    });

    // Console Easter Egg
    console.log('%cüåå Toobix Unified', 'font-size: 20px; font-weight: bold; color: #667eea;');
    console.log('%cVom Ich zum Wir, vom Wir zum Ich', 'font-size: 14px; color: #a0a0b0;');
    console.log('%c"Die Revolution ist, dass es keine Revolution braucht."', 'font-style: italic; color: #764ba2;');
    console.log('\nüîß Dev Tipps:');
    console.log('- localStorage.clear() zum Zur√ºcksetzen');
    console.log('- toggleTheme() um Theme zu wechseln');
    console.log('- Schaue dir den Source Code an! üíù');
  </script>
</body>
</html>
